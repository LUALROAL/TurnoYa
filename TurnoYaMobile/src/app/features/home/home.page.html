<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>Inicio ðŸ”¥</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="t-page">
  <div class="home-container">
    <!-- InformaciÃ³n del Usuario -->
    <ion-card class="user-card">
      <ion-card-header>
        <ion-card-title>Hola, {{ getDisplayName() }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <ng-container *ngIf="currentUser; else guestState">
          <div class="user-info">
            <div class="user-avatar">{{ getInitials() }}</div>
            <div class="user-meta">
              <p><strong>Email:</strong> {{ currentUser.email }}</p>
              <p><strong>Telefono:</strong> {{ currentUser.phone || 'No registrado' }}</p>
              <p><strong>Rol:</strong> {{ getRoleLabel() }}</p>
            </div>
          </div>
        </ng-container>
        <ng-template #guestState>
          <p>Inicia sesion para ver tu informacion y gestionar tus citas.</p>
          <ion-button expand="block" routerLink="/login">Ir a Login</ion-button>
        </ng-template>
      </ion-card-content>
    </ion-card>

    <!-- Acciones Rapidas -->
    <div class="modules-section ion-margin-top">
      <h2>Acciones Rapidas</h2>

      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-card button routerLink="/business/list" routerDirection="forward">
              <ion-card-header>
                <ion-icon name="business-outline" size="large" color="primary"></ion-icon>
                <ion-card-title>Buscar Negocios</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Explora negocios disponibles para agendar citas
              </ion-card-content>
            </ion-card>
          </ion-col>

          <ion-col size="12" size-md="6">
            <ion-card button routerLink="/appointments/list" routerDirection="forward">
              <ion-card-header>
                <ion-icon name="calendar-outline" size="large" color="primary"></ion-icon>
                <ion-card-title>Mis Citas</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Gestiona tus citas agendadas
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="isBusinessOwner">
          <ion-col size="12" size-md="6">
            <ion-card button routerLink="/business/form" routerDirection="forward">
              <ion-card-header>
                <ion-icon name="business-outline" size="large" color="success"></ion-icon>
                <ion-card-title>Crear Negocio</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Registra un nuevo negocio y sus servicios
              </ion-card-content>
            </ion-card>
          </ion-col>

          <ion-col size="12" size-md="6">
            <ion-card button routerLink="/business/list" routerDirection="forward">
              <ion-card-header>
                <ion-icon name="albums-outline" size="large" color="success"></ion-icon>
                <ion-card-title>Gestionar Negocios</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Revisa y administra tus negocios existentes
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="isAdmin">
          <ion-col size="12" size-md="6">
            <ion-card button routerLink="/admin" routerDirection="forward">
              <ion-card-header>
                <ion-icon name="shield-checkmark-outline" size="large" color="danger"></ion-icon>
                <ion-card-title>Panel Admin</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Gestiona usuarios y roles del sistema
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-card button routerLink="/profile" routerDirection="forward">
              <ion-card-header>
                <ion-icon name="person-outline" size="large" color="primary"></ion-icon>
                <ion-card-title>Mi Perfil</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Actualiza tu informacion y cambia de rol
              </ion-card-content>
            </ion-card>
          </ion-col>

          <ion-col size="12" size-md="6">
            <ion-card button disabled>
              <ion-card-header>
                <ion-icon name="card-outline" size="large" color="medium"></ion-icon>
                <ion-card-title>Pagos</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Administra tus metodos de pago (Proximamente)
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <ion-button *ngIf="currentUser" expand="block" color="danger" (click)="logout()" class="ion-margin-top">
      <ion-icon name="log-out-outline" slot="start"></ion-icon>
      Cerrar Sesion
    </ion-button>
  </div>
</ion-content>
