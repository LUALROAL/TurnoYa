<div class="ion-page">
<ion-content>
  <div class="t-page">

    <!-- Header -->
    <header class="t-header t-flex-row t-items-center t-mb-6">
      <ion-back-button defaultHref="/home" mode="md" class="t-back-button"></ion-back-button>
      <h1 class="t-h1 t-ml-4">Mi Perfil</h1>
    </header>

    <!-- User Info Card -->
    <div class="t-card profile-card t-mb-6">
      <div class="profile-header t-flex-row t-items-center t-mb-4">
        <div class="avatar-placeholder">
          {{ getInitials(user?.firstName, user?.lastName) }}
        </div>
        <div class="t-ml-4">
          <h2 class="t-h3">{{ user?.firstName }} {{ user?.lastName }}</h2>
          <p class="t-caption t-text-secondary">{{ getRoleLabel(user?.role) }}</p>
        </div>
      </div>

      <div class="info-list">
        <div class="info-item">
          <ion-icon name="mail-outline"></ion-icon>
          <div class="info-content">
            <span class="label">Email</span>
            <span class="value">{{ user?.email }}</span>
          </div>
        </div>

        @if (user?.phone) {
        <div class="info-item">
          <ion-icon name="call-outline"></ion-icon>
          <div class="info-content">
            <span class="label">Teléfono</span>
            <span class="value">{{ user?.phone }}</span>
          </div>
        </div>
        }
      </div>
    </div>

    <!-- Role Switcher -->
    <div class="t-card role-card">
      <h3 class="t-h3 t-mb-2">Cambiar Rol</h3>
      <p class="t-body t-text-secondary t-mb-4">
        Selecciona tu perfil activo para acceder a diferentes funciones.
      </p>

      <div class="role-selector">
        @for (role of roleOptions; track role.value) {
        <button class="role-btn" [class.active]="selectedRole === role.value" (click)="confirmRoleChange(role.value)">
          <div class="radio-circle">
            @if (selectedRole === role.value) {
            <div class="inner-circle"></div>
            }
          </div>
          <div class="role-info">
            <span class="role-name">{{ role.label }}</span>
            <span class="role-desc">{{ role.description }}</span>
          </div>
        </button>
        }
      </div>
    </div>

    <!-- Sign Out Button (Optional, good to have) -->
    <ion-button expand="block" fill="outline" color="danger" class="t-mt-8 logout-btn" (click)="logout()">
      <ion-icon name="log-out-outline" slot="start"></ion-icon>
      Cerrar Sesión
    </ion-button>

  </div>
</ion-content>
</div>
